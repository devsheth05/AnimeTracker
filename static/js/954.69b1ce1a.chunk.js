"use strict";(self.webpackChunkanime_tracker=self.webpackChunkanime_tracker||[]).push([[954],{954:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(555),i=a(43),s=a(722),r=(a(626),a(150)),l=a(579);const o=()=>{const[e,t]=(0,i.useState)(""),[a,o]=(0,i.useState)([]),[c,d]=(0,i.useState)(""),[m,g]=(0,i.useState)([]),[h,p]=(0,i.useState)(""),[v,u]=(0,i.useState)([]),x=async e=>{try{const t=await s.A.post("https://graphql.anilist.co",{query:"\n          query ($genre: String) {\n            Page(page: 1, perPage: 50) {\n              media(type: ANIME, sort: POPULARITY_DESC, genre: $genre) {\n                id\n                title {\n                  romaji\n                  english\n                  native\n                }\n                coverImage {\n                  large\n                }\n                genres\n              }\n            }\n          }\n        ",variables:{genre:e}});g(t.data.data.Page.media||[])}catch(c){d("Failed to load top anime.")}},f=async()=>{try{const e=await s.A.post("https://graphql.anilist.co",{query:"\n          query {\n            Page(page: 1, perPage: 50) {\n              media(type: ANIME, sort: POPULARITY_DESC) {\n                id\n                title {\n                  romaji\n                  english\n                  native\n                }\n                coverImage {\n                  large\n                }\n                genres\n              }\n            }\n          }\n        "});g(e.data.data.Page.media||[])}catch(c){d("Failed to load top anime.")}},y=e=>{const t=a.filter((t=>t.id!==e));o(t),localStorage.setItem("animeList",JSON.stringify(t))};return(0,i.useEffect)((()=>{(async()=>{try{const e=await s.A.post("https://graphql.anilist.co",{query:"\n        query {\n          GenreCollection\n        }\n      "});console.log("Genres API Response:",e.data);const t=e.data.data.GenreCollection.filter((e=>"Hentai"!==e));u(t||[])}catch(c){console.error("Failed to fetch genres:",c),d("Failed to fetch genres.")}})(),f();const e=localStorage.getItem("animeList");if(e)try{const t=JSON.parse(e);Array.isArray(t)&&o(t)}catch(c){console.error("Error parsing anime list from localStorage:",c),o([])}}),[]),(0,i.useEffect)((()=>{h?x(h):f()}),[h]),(0,l.jsxs)("div",{className:"search-page container mx-auto px-4",children:[(0,l.jsx)("h1",{style:{fontSize:"60px"},className:"font-bold mb-6",children:"Anime Search and List"}),(0,l.jsxs)("div",{className:"mb-6 genre-filter",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{fontSize:"28px"},children:"Filter by Genre"}),(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"p-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"All"}),v.map((e=>(0,l.jsx)("option",{value:e,children:e},e)))]})]}),(0,l.jsxs)("div",{className:"mb-6 search-section",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{fontSize:"28px"},children:"Search for an Anime"}),(0,l.jsx)("input",{type:"text",placeholder:"Search for an anime...",value:e,onChange:e=>t(e.target.value),className:"p-2 border rounded w-full"}),(0,l.jsx)("button",{onClick:async()=>{if(""!==e.trim())try{const t=await s.A.post("https://graphql.anilist.co",{query:"\n          query ($search: String) {\n            Page(page: 1, perPage: 50) {\n              media(type: ANIME, search: $search) {\n                id\n                title {\n                  romaji\n                  english\n                  native\n                }\n                coverImage {\n                  large\n                }\n                genres\n              }\n            }\n          }\n        ",variables:{search:e}});g(t.data.data.Page.media||[])}catch(c){d("Failed to search anime.")}else x(h||"")},className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded",style:{fontSize:"22px"},children:"Search"})]}),(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",style:{fontSize:"45px"},children:"Your List"}),(0,l.jsx)(r.JY,{onDragEnd:e=>{if(!e.destination)return;const t=Array.from(a),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n),o(t),localStorage.setItem("animeList",JSON.stringify(t))},children:(0,l.jsx)(r.gL,{droppableId:"animeList",direction:"horizontal",children:e=>(0,l.jsxs)("div",(0,n.A)((0,n.A)({},e.droppableProps),{},{ref:e.innerRef,className:"anime-grid mb-8",children:[a.map(((e,t)=>{const a=e.id?e.id.toString():"anime-".concat(t);return(0,l.jsx)(r.sx,{draggableId:a,index:t,children:t=>{var a,i,s,r,o;return(0,l.jsxs)("div",(0,n.A)((0,n.A)((0,n.A)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:"anime-item",children:[(0,l.jsx)("img",{src:(null===(a=e.coverImage)||void 0===a?void 0:a.large)||"https://via.placeholder.com/150",alt:(null===(i=e.title)||void 0===i?void 0:i.romaji)||(null===(s=e.title)||void 0===s?void 0:s.english)||"Anime cover",className:"anime-img"}),(0,l.jsx)("div",{className:"text-center text-sm",children:(null===(r=e.title)||void 0===r?void 0:r.romaji)||(null===(o=e.title)||void 0===o?void 0:o.english)||"Untitled"}),(0,l.jsx)("button",{onClick:()=>y(e.id),className:"remove-btn",children:"Remove"})]}))}},a)})),e.placeholder]}))})}),(0,l.jsx)("h2",{className:"text-3xl font-bold mb-4",style:{fontSize:"45px"},children:"Top 50 Anime"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("div",{className:"anime-grid",children:m.length>0?m.map((e=>{var t,n,i,s,r;const c=a.some((t=>t.id===e.id));return(0,l.jsxs)("div",{className:"anime-item",children:[(0,l.jsx)("img",{src:null===(t=e.coverImage)||void 0===t?void 0:t.large,alt:(null===(n=e.title)||void 0===n?void 0:n.romaji)||(null===(i=e.title)||void 0===i?void 0:i.english)||"Anime cover",className:"anime-img"}),(0,l.jsx)("div",{className:"text-center text-sm mb-2",children:(null===(s=e.title)||void 0===s?void 0:s.romaji)||(null===(r=e.title)||void 0===r?void 0:r.english)||"Untitled"}),(0,l.jsx)("button",{onClick:()=>c?y(e.id):(e=>{const t={id:e.id,title:e.title||{romaji:"Untitled",english:"Untitled"},coverImage:e.coverImage||{large:"https://via.placeholder.com/150"}};if(!a.some((e=>e.id===t.id))){const e=[...a,t];o(e),localStorage.setItem("animeList",JSON.stringify(e))}})(e),className:"w-full px-3 py-1 rounded ".concat(c?"added-btn":"add-btn"," hover:opacity-80"),children:c?"Added":"Add to List"})]},e.id)})):(0,l.jsx)("p",{className:"text-center",children:"No anime found for the selected genre or search."})})})]})}}}]);
//# sourceMappingURL=954.69b1ce1a.chunk.js.map